<!DOCTYPE HTML>
<html>
<!--
Copyright (c) 2012 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<head>
<title>Sorted Array Utils Tests</title>
<script src="/src/base.js"></script>
<script>
  base.require('base.unittest');
  base.require('base.sorted_array_utils');
</script>
<link rel="shortcut icon" href="data:image/x-icon;base64," type="image/x-icon">
</head>
<body>
<script>
    'use strict';

    function ArrayOfIntervals(array) {
      this.array = array;
    }

    ArrayOfIntervals.prototype = {
      findLowIndex: function(ts) {
        return base.findLowIndexInSortedIntervals(
          this.array,
          function(x) { return x.lo; },
          function(x) { return x.hi - x.lo; },
          ts);
      }
    };

    function testFindLow(array) {
      var array = new ArrayOfIntervals([
        {lo: 10, hi: 15},
        {lo: 20, hi: 30}
        ]);

      assertEquals(-1, array.findLowIndex(0));
      assertEquals(0, array.findLowIndex(10));
      assertEquals(0, array.findLowIndex(12));
      assertEquals(0, array.findLowIndex(14.9));

      // These two are a little odd... the return is correct in that
      // it was not found, but its neither below, nor above. Whatever.
      assertEquals(2, array.findLowIndex(15));
      assertEquals(2, array.findLowIndex(16));

      assertEquals(1, array.findLowIndex(20));
      assertEquals(1, array.findLowIndex(21));
      assertEquals(1, array.findLowIndex(29.99));

      assertEquals(2, array.findLowIndex(30));
      assertEquals(2, array.findLowIndex(40));
    }

</script>
</body>
</html>
