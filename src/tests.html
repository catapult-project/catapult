<!DOCTYPE html>
<html>
<!--
Copyright (c) 2013 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<head>
<title>All Tracing Tests</title>
<script src="/src/base.js"></script>
<script>
  base.require('base.unittest');
</script>
<link rel="shortcut icon" href="data:image/x-icon;base64," type="image/x-icon">
</head>
<body id="test_harness">
  <h1>Trace-Viewer Tests</h3>

  <div id="stats">
    <br />
  </div>

  <div id='individual_tests'>
    <div class="unittest">
      Interactive tests:
      <a href="interactive_tests.html"
          class="unittest-error-link">Run manually</a>
    </div>
    <div class="unittest">
      Record Selection Interactive Tests:
      <a href="tracing/record_selection_dialog_interactive_tests.html"
          class="unittest-error-link">Run manually</a>
    </div>
  </div>

  <script>

    function getAsync(url, cb) {
      var req = new XMLHttpRequest();
      req.open('GET', url, true);
      req.onreadystatechange = function(aEvt) {
        if (req.readyState == 4) {
          window.setTimeout(function() {
            if (req.status == 200) {
              cb(req.responseText);
            } else {
              console.log('Failed to load ' + url);
            }
          }, 0);
        }
      };
      req.send(null);
    }

    document.addEventListener('DOMContentLoaded', function() {
      var stats = document.getElementById('stats');

      var runner = new base.unittest.AsyncTestRunner();
      runner.statsBlock = stats;
      document.body.appendChild(runner);
      getAsync('/json/tests', function(data) {
         runner.enqueueTests(JSON.parse(data));
      });
    });
  </script>
</body>
</html>
